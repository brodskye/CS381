--CS381 HW4
--Eytan Brodsky, David Jansen, Shanmukh Challa

--Excercise 1. Runtime Stack
--{ int x;
--  int y;
--  y := 1;
--  { int f(int x) {
--    if x=0 then {
--      y := 1 }
--    else {
--      y := f(x-1)*y+1 };
--    return y;
--  };
--  x := f(2);
-- };
--}


-- []
-- 1 [x:?]
-- 2 [y:?, x:?]
-- 3 [y:1, x:?]
-- 4 [f:{}, y:1, x:?]
-- 11 >>
--           [x:2, f:{}, y:1, x:?] x > 0 so we jump to 8
--         8 [x:1, x:2, f:{}, y:1, x:?] x > 0 so we jump to 8
--         8 [x:0, x:1, x:2, f:{}, y:1, x:?] x == 0, so y=1
--         9 [res:1, x:0, x:1, x:2, f{}, y:1, x:?]
--         8 [x:1, x:2, f:{}, y:2, x:?]
--         9 [res: 2, x:1, x:2, f:{}, y:5, x:?]
--         8 [x:2, f:{}, y:5, x:?]
--         9 [res: 5, x:2, f:{}, y:5, x:?]
--          <<
-- 11 [f:{}, y:5, x:5]
-- 12 [f:{}, y:5, x:5]
-- 13 ...

{-
Exercise 2

a) z will be 21 after static scoping.

b) z will be 26 after dynamic scoping.

}

-- Exercise 3
-- a
{-
 -
 - Call-by-Name:
 -
 -  0:  []
 -  2:  [z:?, y:?]
 -  3:  [z:?, y:7]
 -  8:  [g:{}, f:{}, z:?, y:7]
 -  13: >>
 -      8:  [<x:y*2>, g:{}, f:{}, z:?, y:7]
 -      9:  >>
 -          4:  [<a:x+1>, <x:y*2>, g:{}, f:{}, z:?, y:7]
 -          5:  [<a:x+1>, <x:y*2>, g:{}, f:{}, z:?, y:16]
 -          6:  [res:49, <a:x+1>, <x:y*2>, g:{}, f:{}, z:?, y:16]
 -          <<
 -      9:  [<x:y*2>, g:{}, f:{}, z:?, y:50]
 -      10: >>
 -          4:  [<a:x-y+3>, <x:y*2>, g:{}, f:{}, z:?, y:50]
 -          5:  [<a:x-y+3>, <x:y*2>, g:{}, f:{}, z:?, y:54]
 -          6:  [res:111, <a:x-y+3>, <x:y*2>, g:{}, f:{}, z:?, y:54]
 -          <<
 -      10: [<x:y*2>, g:{}, f:{}, z:111, y:54]
 -      11: [res:112, <x:y*2>, g:{}, f:{}, z:111, y:54]
 -      <<
 -  13: [g:{}, f:{}, z:112, y:54]
 -
 -  Resulting values: y=54, z=112
 -
 -}

-- b
{-
 -
 - Call-by-Need:
 -
 -  0:  []
 -  2:  [z:?, y:?]
 -  3:  [z:?, y:7]
 -  8:  [g:{}, f:{}, z:?, y:7]
 -  13: >>
 -      8:  [<x:y*2>, g:{}, f:{}, z:?, y:7]
 -      9:  >>
 -          4:  [<a:x+1>, <x:14>, g:{}, f:{}, z:?, y:7]
 -          5:  [<a:15>, <x:14>, g:{}, f:{}, z:?, y:16]
 -          6:  [res:31, <a:15>, <x:14>, g:{}, f:{}, z:?, y:16]
 -          <<
 -      9:  [<x:14>, g:{}, f:{}, z:?, y:32]
 -      10: >>
 -          4:  [<a:x-y+3>, <x:14>, g:{}, f:{}, z:?, y:32]
 -          5:  [<a:-15>, <x:14>, g:{}, f:{}, z:?, y:-14]
 -          6:  [res:-29, <a:-15>, <x:14>, g:{}, f:{}, z:?, y:-14]
 -          <<
 -      10: [<x:14>, g:{}, f:{}, z:-29, y:-14]
 -      11: [res:-28, <x:14>, g:{}, f:{}, z:-29, y:14]
 -      <<
 -  13: [g:{}, f:{}, z:-28, y:-14]
 -
 - Resulting values: y=-14, z=-28
 - 
 -}
